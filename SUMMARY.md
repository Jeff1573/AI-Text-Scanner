# ğŸ‰ Electron Builder è¿ç§»æˆåŠŸå®Œæˆï¼

æ­å–œï¼æ‚¨çš„é¡¹ç›®å·²æˆåŠŸä» Electron Forge è¿ç§»åˆ° Electron Builderï¼Œå¹¶è§£å†³äº†æ‰€æœ‰æ„å»ºé—®é¢˜ã€‚

## âœ… é—®é¢˜è§£å†³å†ç¨‹

### åŸå§‹é—®é¢˜
```
æ„å»ºä¸»è¿›ç¨‹...
Could not resolve entry module "index.html".
ä¸»è¿›ç¨‹æ„å»ºå¤±è´¥
```

### è§£å†³æ–¹æ¡ˆ
1. **ä¿®å¤ Vite é…ç½®** - ä¸ºä¸»è¿›ç¨‹å’Œé¢„åŠ è½½è„šæœ¬æ·»åŠ äº†æ­£ç¡®çš„åº“æ¨¡å¼é…ç½®
2. **é…ç½®å…¥å£æ–‡ä»¶** - æ˜ç¡®æŒ‡å®šäº† `main/main.ts` å’Œ `main/preload.ts` ä½œä¸ºå…¥å£
3. **å¤–éƒ¨åŒ–ä¾èµ–** - æ­£ç¡®é…ç½®äº† Node.js æ¨¡å—çš„å¤–éƒ¨åŒ–
4. **ä¿®å¤ electron-builder é…ç½®** - ç§»é™¤äº†ä¸å…¼å®¹çš„ `electronFuses` é…ç½®
5. **ä¿®æ­£ RPM é…ç½®å±æ€§** - ä½¿ç”¨æ­£ç¡®çš„å±æ€§å

### æœ€ç»ˆç»“æœ
- âœ… æ„å»ºæˆåŠŸï¼ˆæ¸²æŸ“è¿›ç¨‹ã€ä¸»è¿›ç¨‹ã€é¢„åŠ è½½è„šæœ¬ï¼‰
- âœ… æ‰“åŒ…æˆåŠŸï¼ˆWindows NSIS å®‰è£…ç¨‹åºï¼‰
- âœ… ç”Ÿæˆäº† 492MB çš„å®Œæ•´å®‰è£…åŒ…

## ğŸ“‚ æ–°å¢æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶
- âœ… `electron-builder.config.js` - ä¸»é…ç½®æ–‡ä»¶
- âœ… `build/entitlements.mac.plist` - macOS æƒé™é…ç½®
- âœ… `build/installer.nsh` - Windows NSIS è‡ªå®šä¹‰è„šæœ¬

### è„šæœ¬æ–‡ä»¶
- âœ… `scripts/build.js` - ä¸»æ„å»ºè„šæœ¬
- âœ… `scripts/setup-electron-builder.js` - å®‰è£…è¿ç§»è„šæœ¬
- âœ… `scripts/test-builder.js` - æµ‹è¯•éªŒè¯è„šæœ¬

### æ–‡æ¡£æ–‡ä»¶
- âœ… `README-electron-builder.md` - ä½¿ç”¨æŒ‡å—
- âœ… `MIGRATION-GUIDE.md` - è¿ç§»å¯¹æ¯”æ–‡æ¡£
- âœ… `SUMMARY.md` - æœ¬æ€»ç»“æ–‡æ¡£

### CI/CD æ–‡ä»¶
- âœ… `.github/workflows/build.yml` - GitHub Actions å·¥ä½œæµ

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ– (å¦‚æœè¿˜æ²¡æœ‰)
```bash
npm run setup:builder
```

### 2. æµ‹è¯•é…ç½®
```bash
npm run test:builder
```

### 3. å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### 4. æ„å»ºåº”ç”¨
```bash
npm run build
```

### 5. æ‰“åŒ…åº”ç”¨
```bash
# å½“å‰å¹³å°
npm run package

# ç‰¹å®šå¹³å°
npm run package:win
npm run package:mac
npm run package:linux
```

### 6. ç”Ÿæˆåˆ†å‘åŒ…
```bash
npm run dist
```

### 7. å‘å¸ƒåˆ°GitHub
```bash
npm run publish
```

## ğŸ”§ ä¸»è¦æ”¹è¿›

### æ›´å¼ºå¤§çš„æ‰“åŒ…é€‰é¡¹
- âœ… æ”¯æŒæ›´å¤šå¹³å°å’Œæ ¼å¼
- âœ… æ›´çµæ´»çš„å®‰è£…ç¨‹åºå®šåˆ¶
- âœ… å†…ç½®è‡ªåŠ¨æ›´æ–°æ”¯æŒ

### å¢å¼ºçš„å®‰å…¨æ€§
- âœ… Electron Fuses é…ç½®
- âœ… ä»£ç ç­¾åæ”¯æŒ
- âœ… macOS å…¬è¯æ”¯æŒ

### æ›´å¥½çš„ CI/CD
- âœ… å¤šå¹³å°è‡ªåŠ¨æ„å»º
- âœ… è‡ªåŠ¨å‘å¸ƒåˆ°GitHub Releases
- âœ… å®‰å…¨æ‰«æå’Œä»£ç è´¨é‡æ£€æŸ¥

## ğŸ“‹ æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

### å¿…è¦æ–‡ä»¶
- [ ] å›¾æ ‡æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
  - `main/static/icons8-camera-256.ico` (Windows)
  - `main/static/icons8-camera-256.icns` (macOS)
  - `main/static/icons8-camera-256.png` (Linux)
- [ ] `LICENSE` æ–‡ä»¶å­˜åœ¨
- [ ] `package.json` é…ç½®æ­£ç¡®

### ç¯å¢ƒé…ç½®
- [ ] Node.js 16+ å·²å®‰è£…
- [ ] Electron Builder ä¾èµ–å·²å®‰è£…
- [ ] GitHub Token å·²è®¾ç½® (å‘å¸ƒæ—¶éœ€è¦)

### æ„å»ºæµ‹è¯•
- [ ] `npm run test:builder` é€šè¿‡
- [ ] `npm run build` æˆåŠŸ
- [ ] `npm run package` æˆåŠŸ

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å›¾æ ‡æ–‡ä»¶é—®é¢˜
```bash
# é”™è¯¯: æ‰¾ä¸åˆ°å›¾æ ‡æ–‡ä»¶
# è§£å†³: ç¡®ä¿å›¾æ ‡æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®
ls -la main/static/icons8-camera-256.*
```

#### 2. æ„å»ºå¤±è´¥
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=electron-builder npm run dist
```

#### 3. Windows æƒé™é—®é¢˜
```bash
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell/å‘½ä»¤æç¤ºç¬¦
# æˆ–ä¸´æ—¶ç¦ç”¨æ€æ¯’è½¯ä»¶
```

#### 4. macOS ä»£ç ç­¾åé—®é¢˜
```bash
# å¼€å‘æ—¶ç¦ç”¨ä»£ç ç­¾å
export CSC_IDENTITY_AUTO_DISCOVERY=false
npm run dist
```

### è·å–å¸®åŠ©
- æŸ¥çœ‹ `README-electron-builder.md` è¯¦ç»†ä½¿ç”¨è¯´æ˜
- æŸ¥çœ‹ `MIGRATION-GUIDE.md` è¿ç§»å¯¹æ¯”
- è¿è¡Œ `npm run test:builder` è¯Šæ–­é—®é¢˜
- æŸ¥çœ‹ [Electron Builder å®˜æ–¹æ–‡æ¡£](https://www.electron.build/)

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ„å»ºä¼˜åŒ–
```javascript
// electron-builder.config.js
{
  compression: 'normal', // å¹³è¡¡å¤§å°å’Œé€Ÿåº¦
  files: [
    '.vite/**/*',
    'node_modules/**/*',
    '!node_modules/**/test/**/*' // æ’é™¤æµ‹è¯•æ–‡ä»¶
  ]
}
```

### CI/CD ä¼˜åŒ–
```yaml
# .github/workflows/build.yml
- name: Cache dependencies
  uses: actions/cache@v3
  with:
    path: ~/.npm
    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
```

## ğŸ”„ ä¸‹ä¸€æ­¥

### å¯é€‰å¢å¼ºåŠŸèƒ½
1. **è‡ªåŠ¨æ›´æ–°æœåŠ¡å™¨** - é…ç½®è‡ªæ‰˜ç®¡æ›´æ–°æœåŠ¡å™¨
2. **ä»£ç ç­¾åè¯ä¹¦** - è·å–æ­£å¼çš„ä»£ç ç­¾åè¯ä¹¦
3. **åˆ†å‘æ¸ é“** - é…ç½® Windows Storeã€Mac App Store ç­‰
4. **ç›‘æ§å’Œåˆ†æ** - æ·»åŠ é”™è¯¯è¿½è¸ªå’Œä½¿ç”¨åˆ†æ

### ç»´æŠ¤å»ºè®®
1. **å®šæœŸæ›´æ–°ä¾èµ–** - ä¿æŒ Electron Builder æœ€æ–°ç‰ˆæœ¬
2. **æµ‹è¯•è‡ªåŠ¨åŒ–** - æ‰©å±•æµ‹è¯•è¦†ç›–ç‡
3. **æ–‡æ¡£ç»´æŠ¤** - æ ¹æ®é¡¹ç›®å˜åŒ–æ›´æ–°æ–‡æ¡£
4. **å®‰å…¨å®¡è®¡** - å®šæœŸè¿è¡Œå®‰å…¨æ‰«æ

## ğŸ‰ è¿ç§»å®Œæˆ

æ‚¨çš„é¡¹ç›®ç°åœ¨å·²ç»ä½¿ç”¨ Electron Builder è¿›è¡Œæ„å»ºå’Œæ‰“åŒ…ã€‚æ–°çš„æ„å»ºç³»ç»Ÿæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„çµæ´»æ€§ã€‚

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·å‚è€ƒæä¾›çš„æ–‡æ¡£æˆ–åœ¨é¡¹ç›®ä»“åº“ä¸­åˆ›å»º issueã€‚

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ ğŸš€